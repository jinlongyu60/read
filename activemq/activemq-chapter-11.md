# Chapter 11

ActiveMQ broker features in action

This chapter covers

- Using wildcards and composite destinations
- Utilizing advisory messages
- Understanding virtual topics and retroactive consumers
- Using ActiveMQ plug-ins
- An introduction to Apache Camel

## Apache Camel

## Consume from multiple destinations using wildcards

Three special characters are reserved for destination names:

- `.` A dot, used to separate elements in the destination name
- `*` Used to match one element
- `>` Matches one or all trailing elements

So to subscribe to the latest scores that all Leeds teams are playing in, you can subscribe
to the topic named `*.*.Leeds`, as shown:

```java
String brokerURI = ActiveMQConnectionFactory.DEFAULT_BROKER_URL;
ConnectionFactory connectionFactory =
new ActiveMQConnectionFactory(brokerURI);
Connection connection = connectionFactory.createConnection();
connection.start();
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Topic allLeeds = session.createTopic("*.*.Leeds");
MessageConsumer consumer = session.createConsumer(allLeeds);
Message result = consumer.receive();
```

## Sending a message to multiple destinations

It can be useful to send the same message to different destinations at once

ActiveMQ supports a feature called composite destinations
that allows you to send the same message to multiple destinations at once.

```conf
    store.order.backoffice,store.order.warehouse
```

```java
String brokerURI = ActiveMQConnectionFactory.DEFAULT_BROKER_URL;
ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(brokerURI);
Connection connection = connectionFactory.createConnection();
connection.start();
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Queue ordersDestination = session.createQueue("store.orders, topic://
store.orders");
MessageProducer producer = session.createProducer(ordersDestination);
Message order = session.createObjectMessage();
producer.send(order);
```

## Advisory messages

Advisory messages are notification messages generated by the ActiveMQ broker as a
result of changes to the broker.